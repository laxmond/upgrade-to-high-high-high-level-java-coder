## es的数据分片副本概念及如何设置分片副本



#### 1、数据分片副本概念及优势

es中一个index下，可以有多分片数据，但是如果其中一片挂掉了，那么数据就挂掉了，所以es中就引入了分片副本，可以对每个分片进行拷贝做成副本，分片副本不能跟原分片放在一个节点上。分片数据副本存在哪里是由master节点管理的！！！



分片数据副本的优点：

1. 高可用性
2. 扩展吞吐量，因为在副本中也是可以进行搜索的！！



#### 2、如何设置分片副本

在创建索引的时候（<font color="red">千万不能在索引已经创建了的情况下，设置分片，否则会报错！</font>），向es服务器发送PUT请求，请求地址为：`http://ip:port/索引名称`，请求体为：

```json
{
  "settings":{
  	"number_of_replicas":1  //分片副本数量为1
  }
}
```



#### 3、如何修改分片副本数量

es服务器发送PUT请求，请求地址为：`http://ip:port/索引名称/_settings`，请求体为：

```json
{
  "index":{
  	"number_of_replicas":2  //分片副本数量为1
  }
}	
```

