## es在多分片多副本下数据是如何读、写的



#### 1、写数据

数据写入哪个分片叫“路由计算”，下图绿的是分片数据，紫色的是副本数据，写入数据只会往分片上写，副本是分片写完数据从分片同步数据的！！！

![avatar](../images/667.jpg)



整个写入流程

![avatar](../images/888.jpg)





#### 2、读数据

读取数据从哪个分片去读叫“分片控制”，读取的时候分片与副本是做负载均衡的，所以副本多效率就高

![avatar](../images/777.jpg)



整个读取流程

![avatar](../images/999.jpg)